<%= render "devise/shared/navbar" %>

<div class="page">
    <div class= "show-back">
        <i class="fa-solid fa-arrow-left"></i>
    </div>
    <div class= "show-page">    
        <div class="banner-image">
            <% if @event.poster_pic.present? %>
                <%= image_tag(@event.poster_pic, alt: "Event Image", class: "event-image")%>
            <% else %>
                <%= image_tag("default-poster.jpg", alt: "Event Image", class: "event-image" )%>
            <% end %>
        </div>

        <div class="event-container">
            <div class="event-header">
                <h1 class="event-title"><%= @event.title %></h1>
                <div class="event-icons">
                    <i class="fa-regular fa-heart"></i>
                    <i class="fa-solid fa-share"></i>
                </div>
            </div>

            <div class="event-details">
                <div class="event-info">
                    <h3 class="info-title">Data e Ora</h3>
                    <p class="info-date"><i class="fa-regular fa-calendar"></i><%= l(@event.start_datetime, format: "%A, %d %B %Y").gsub(/\b\w/) { |match| match.upcase } %></p>
                    <p class="info-time"><i class="fa-regular fa-clock"></i><%= @event.start_datetime.strftime("%H:%M") %></p>
                </div>
                <% if can? :read, @cart%>
                    <div class="event-buy">
                        aggiungi al carrello
                        <%= button_to "aggiungi al carrello", cart_items_path(:event_id => @event.id), method: :post %>
                        <br>
                        <div class="tckt-info">
                            <h4>Info Biglietti</h4>
                            <% if @event.event_price == 0 %>
                                <p><i class="fa-solid fa-ticket"></i>Gratis</p>
                            <% else %>
                                <p><i class="fa-solid fa-ticket"></i><%= number_to_currency(@event.event_price) %></p>
                            <% end %>
                        </div>
                    </div>
                <% end %>
            </div>

            <div class="event-location">
                <h3>Location</h3>
                <p><i class="fa-solid fa-location-dot"></i><%= @event.address+", "+@event.city+", "+@event.country%></p>
                <div class="map"></div>
            </div>

            <div class="event-host">
                <h3>Organizzato Da</h3>
                <div class="host-info">
                    <% if current_user.profile_pic.present? %>
                        <%= image_tag(@user.profile_pic, class: "host-image" )%>
                    <% else %>
                        <%= image_tag("default-avatar.png", class: "host-image" )%>
                    <% end %>
                    <%#= image_tag "Profile.png", class: "host-image" %>
                    <div class="host-details">
                        <p class="host-name"><%= @user.first_name %></p>
                        <%#= button_to "Visita profilo", user_show_%>
                        <button class="follow-btn">+ Follow</button>
                    </div>
                </div>
            </div>

            <div class="event-description">
                <h3>Descrizione</h3>
                <p><%= @event.description %></p>
            </div>

            <div class="tags">
                <h3>Categoria</h3>
                <div class="tag-list">
                    <span class="tag"><%= @event.category %></span>
                </div>
            </div>
        </div>
    </div>

</div>
<%= render "devise/shared/footer" %>
